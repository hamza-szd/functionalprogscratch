{"ast":null,"code":"import\"./app.css\";import\"tippy.js/dist/tippy.css\";import{useEffect,useState}from\"react\";import EditorComponent from\"./Editor\";import AppMenuBar from\"./ui/menu-bar/AppMenuBar\";import HelpDialog from\"./ui/HelpDialog\";import LoadDialog from\"./projects/LoadDialog\";import SaveDialog from\"./projects/SaveDialog\";import AppContextMenu from\"./ui/context-menu/AppContextMenu\";import{Editor}from\"./state/Editor\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[renderCounter,setRenderCounter]=useState(0);function rerender(){setRenderCounter(renderCounter+1);}const[editor]=useState(new Editor(rerender));useEffect(()=>{editor.rerender=rerender;},[renderCounter]);const[contextMenuSubject,setContextMenuSubject]=useState();const[codeEditorSubject,setCodeEditorSubject]=useState();const[showLoadDialog,setShowLoadDialog]=useState(false);const[showSaveDialog,setShowSaveDialog]=useState(false);const[showHelpDialog,setShowHelpDialog]=useState(false);const[loadResolve,setLoadResolve]=useState();const[saveResolve,setSaveResolve]=useState();function onBlockContextMenu(indexPath){setContextMenuSubject(indexPath);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AppMenuBar,{onShowLoad:()=>new Promise(resolve=>{setShowLoadDialog(true);setLoadResolve(()=>resolve);}),onShowSave:()=>new Promise(resolve=>{setShowSaveDialog(true);setSaveResolve(()=>resolve);}),onShowHelp:()=>setShowHelpDialog(true),onRunAll:()=>editor.runner.runAll(),onStopAll:()=>editor.runner.stopAll(),editor:editor}),/*#__PURE__*/_jsx(EditorComponent,{editor:editor,onBlockContextMenu:onBlockContextMenu,codeEditorSubject:codeEditorSubject,setCodeEditorSubject:setCodeEditorSubject,renderCounter:renderCounter}),/*#__PURE__*/_jsx(LoadDialog,{show:showLoadDialog,onHide:source=>{setShowLoadDialog(false);loadResolve===null||loadResolve===void 0?void 0:loadResolve(source);}}),/*#__PURE__*/_jsx(SaveDialog,{show:showSaveDialog,onHide:()=>{setShowSaveDialog(false);saveResolve===null||saveResolve===void 0?void 0:saveResolve();},editor:editor}),/*#__PURE__*/_jsx(HelpDialog,{show:showHelpDialog,onHide:()=>setShowHelpDialog(false)}),/*#__PURE__*/_jsx(AppContextMenu,{subject:contextMenuSubject,setCodeEditorSubject:setCodeEditorSubject,editor:editor})]});}export default App;","map":{"version":3,"names":["useEffect","useState","EditorComponent","AppMenuBar","HelpDialog","LoadDialog","SaveDialog","AppContextMenu","Editor","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","renderCounter","setRenderCounter","rerender","editor","contextMenuSubject","setContextMenuSubject","codeEditorSubject","setCodeEditorSubject","showLoadDialog","setShowLoadDialog","showSaveDialog","setShowSaveDialog","showHelpDialog","setShowHelpDialog","loadResolve","setLoadResolve","saveResolve","setSaveResolve","onBlockContextMenu","indexPath","children","onShowLoad","Promise","resolve","onShowSave","onShowHelp","onRunAll","runner","runAll","onStopAll","stopAll","show","onHide","source","subject"],"sources":["/Users/hamzashahzad/Desktop/resume_projects/sparkground/src/editor/App.tsx"],"sourcesContent":["import \"./app.css\";\nimport \"tippy.js/dist/tippy.css\";\nimport { useEffect, useState } from \"react\";\nimport EditorComponent from \"./Editor\";\nimport AppMenuBar from \"./ui/menu-bar/AppMenuBar\";\nimport HelpDialog from \"./ui/HelpDialog\";\nimport { TreeIndexPath } from \"./trees/tree\";\nimport LoadDialog from \"./projects/LoadDialog\";\nimport SaveDialog from \"./projects/SaveDialog\";\nimport AppContextMenu from \"./ui/context-menu/AppContextMenu\";\nimport { Editor } from \"./state/Editor\";\n\nfunction App() {\n  const [renderCounter, setRenderCounter] = useState(0);\n  function rerender() {\n    setRenderCounter(renderCounter + 1);\n  }\n\n  const [editor] = useState(new Editor(rerender));\n  useEffect(() => {\n    editor.rerender = rerender;\n  }, [renderCounter]);\n\n  const [contextMenuSubject, setContextMenuSubject] = useState<TreeIndexPath>();\n  const [codeEditorSubject, setCodeEditorSubject] = useState<TreeIndexPath>();\n\n  const [showLoadDialog, setShowLoadDialog] = useState(false);\n  const [showSaveDialog, setShowSaveDialog] = useState(false);\n  const [showHelpDialog, setShowHelpDialog] = useState(false);\n\n  const [loadResolve, setLoadResolve] = useState<(source: string | undefined) => void>();\n  const [saveResolve, setSaveResolve] = useState<() => void>();\n\n  function onBlockContextMenu(indexPath: TreeIndexPath) {\n    setContextMenuSubject(indexPath);\n  }\n\n  return (\n    <>\n      <AppMenuBar\n        onShowLoad={() =>\n          new Promise((resolve) => {\n            setShowLoadDialog(true);\n            setLoadResolve(() => resolve);\n          })\n        }\n        onShowSave={() =>\n          new Promise((resolve) => {\n            setShowSaveDialog(true);\n            setSaveResolve(() => resolve);\n          })\n        }\n        onShowHelp={() => setShowHelpDialog(true)}\n        onRunAll={() => editor.runner.runAll()}\n        onStopAll={() => editor.runner.stopAll()}\n        editor={editor}\n      />\n\n      <EditorComponent\n        editor={editor}\n        onBlockContextMenu={onBlockContextMenu}\n        codeEditorSubject={codeEditorSubject}\n        setCodeEditorSubject={setCodeEditorSubject}\n        renderCounter={renderCounter}\n      />\n\n      <LoadDialog\n        show={showLoadDialog}\n        onHide={(source) => {\n          setShowLoadDialog(false);\n          loadResolve?.(source);\n        }}\n      />\n      <SaveDialog\n        show={showSaveDialog}\n        onHide={() => {\n          setShowSaveDialog(false);\n          saveResolve?.();\n        }}\n        editor={editor}\n      />\n      <HelpDialog show={showHelpDialog} onHide={() => setShowHelpDialog(false)} />\n\n      <AppContextMenu\n        subject={contextMenuSubject!}\n        setCodeEditorSubject={setCodeEditorSubject}\n        editor={editor}\n      />\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}