{"ast":null,"code":"import{Parser}from\"../../../expr/parse\";import MenuBar from\"./MenuBar\";import MenuBarButton from\"./MenuBarButton\";import MenuBarTitle from\"./MenuBarTitle\";import{parseProjectMeta}from\"../../../project-meta\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function AppMenuBar(_ref){let{onShowLoad,onShowSave,onShowHelp,onRunAll,onStopAll,editor}=_ref;return/*#__PURE__*/_jsxs(MenuBar,{children:[/*#__PURE__*/_jsx(MenuBarTitle,{children:\"Sparkground\"}),/*#__PURE__*/_jsx(MenuBarButton,{action:async event=>{const ok=confirm(\"Any unsaved changes will be lost. Proceed?\");if(!ok)return;editor.deforest();},children:\"New\"}),/*#__PURE__*/_jsx(MenuBarButton,{action:async event=>{let source=await onShowLoad(event);if(source===undefined)return;let meta;[meta,source]=parseProjectMeta(source);const exprs=Parser.parseToExprsWithAttributes(source);if(!exprs.length)return;editor.deforest();let location={x:0,y:0};exprs.forEach(expr=>{var _expr$attributes,_expr$attributes$page,_expr$attributes2;if((_expr$attributes=expr.attributes)!==null&&_expr$attributes!==void 0&&_expr$attributes.location){location=expr.attributes.location;}const pageID=(_expr$attributes$page=(_expr$attributes2=expr.attributes)===null||_expr$attributes2===void 0?void 0:_expr$attributes2.page)!==null&&_expr$attributes$page!==void 0?_expr$attributes$page:0;editor.trees.addNew(expr,{...location},pageID);location.y+=200;});editor.trees.meta=meta;},children:\"Load\"}),/*#__PURE__*/_jsx(MenuBarButton,{action:async event=>{await onShowSave(event);},children:\"Save\"}),/*#__PURE__*/_jsx(MenuBarButton,{action:onShowHelp,children:\"Help\"}),/*#__PURE__*/_jsx(MenuBarButton,{className:\"ms-4\",action:onRunAll,children:\"Run\"}),/*#__PURE__*/_jsx(MenuBarButton,{action:onStopAll,children:\"Stop\"})]});}","map":{"version":3,"names":["Parser","MenuBar","MenuBarButton","MenuBarTitle","parseProjectMeta","jsx","_jsx","jsxs","_jsxs","AppMenuBar","_ref","onShowLoad","onShowSave","onShowHelp","onRunAll","onStopAll","editor","children","action","event","ok","confirm","deforest","source","undefined","meta","exprs","parseToExprsWithAttributes","length","location","x","y","forEach","expr","_expr$attributes","_expr$attributes$page","_expr$attributes2","attributes","pageID","page","trees","addNew","className"],"sources":["/Users/hamzashahzad/Desktop/resume_projects/sparkground/src/editor/ui/menu-bar/AppMenuBar.tsx"],"sourcesContent":["import { SyntheticEvent } from \"react\";\nimport { Parser } from \"../../../expr/parse\";\nimport { Point, PageID } from \"../../trees/trees\";\nimport MenuBar from \"./MenuBar\";\nimport MenuBarButton from \"./MenuBarButton\";\nimport MenuBarTitle from \"./MenuBarTitle\";\nimport { ProjectMeta, parseProjectMeta } from \"../../../project-meta\";\nimport { Editor } from \"../../state/Editor\";\n\nexport type Props = {\n  onShowLoad: (event: SyntheticEvent) => Promise<string | undefined>;\n  onShowSave: (event: SyntheticEvent) => Promise<void>;\n  onShowHelp: (event: SyntheticEvent) => void;\n\n  onRunAll: (event: SyntheticEvent) => void;\n  onStopAll: (event: SyntheticEvent) => void;\n\n  editor: Editor;\n};\n\nexport default function AppMenuBar({\n  onShowLoad,\n  onShowSave,\n  onShowHelp,\n\n  onRunAll,\n  onStopAll,\n\n  editor,\n}: Props) {\n  return (\n    <MenuBar>\n      <MenuBarTitle>Sparkground</MenuBarTitle>\n\n      <MenuBarButton\n        action={async (event) => {\n          const ok = confirm(\"Any unsaved changes will be lost. Proceed?\");\n          if (!ok) return;\n\n          editor.deforest();\n        }}\n      >\n        New\n      </MenuBarButton>\n      <MenuBarButton\n        action={async (event) => {\n          let source = await onShowLoad(event);\n          if (source === undefined) return;\n\n          let meta: ProjectMeta;\n          [meta, source] = parseProjectMeta(source);\n\n          const exprs = Parser.parseToExprsWithAttributes(source);\n          if (!exprs.length) return;\n\n          editor.deforest();\n\n          let location: Point = { x: 0, y: 0 };\n          exprs.forEach((expr) => {\n            if (expr.attributes?.location) {\n              location = expr.attributes.location;\n            }\n            const pageID: PageID = expr.attributes?.page ?? 0;\n            editor.trees.addNew(expr, { ...location }, pageID);\n            location.y += 200;\n          });\n          editor.trees.meta = meta;\n        }}\n      >\n        Load\n      </MenuBarButton>\n      <MenuBarButton\n        action={async (event) => {\n          await onShowSave(event);\n        }}\n      >\n        Save\n      </MenuBarButton>\n      <MenuBarButton action={onShowHelp}>Help</MenuBarButton>\n\n      <MenuBarButton className=\"ms-4\" action={onRunAll}>\n        Run\n      </MenuBarButton>\n      <MenuBarButton action={onStopAll}>Stop</MenuBarButton>\n    </MenuBar>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}