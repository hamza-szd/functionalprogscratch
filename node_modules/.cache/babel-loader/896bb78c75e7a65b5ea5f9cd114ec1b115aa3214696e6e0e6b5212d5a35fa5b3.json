{"ast":null,"code":"import{elaborate}from\"./evaluate\";export class SparkgroundComponent{constructor(state,evaluator){this.state=state;this.evaluator=evaluator;this.toDraw=void 0;this.onTick=void 0;this.onKey=void 0;this.evaluator=evaluator;evaluator.components.push(this);}static create(initialState,evaluator){const component=new SparkgroundComponent(initialState,evaluator);return{kind:\"component\",component};}draw(){try{if(this.toDraw){return elaborate(this.evaluator,this.toDraw(this.state));}}catch(error){// TODO: Remove this try/catch once eval() is changed to not throw any errors\nconsole.error(error);}}tick(){try{if(this.onTick){this.state=elaborate(this.evaluator,this.onTick(this.state));}}catch(error){// TODO: Remove this try/catch once eval() is changed to not throw any errors\nconsole.error(error);}}handleKeypress(key){try{if(this.onKey){this.state=elaborate(this.evaluator,this.onKey(this.state,key));}}catch(error){// TODO: Remove this try/catch once eval() is changed to not throw any errors\nconsole.error(error);}}}","map":{"version":3,"names":["elaborate","SparkgroundComponent","constructor","state","evaluator","toDraw","onTick","onKey","components","push","create","initialState","component","kind","draw","error","console","tick","handleKeypress","key"],"sources":["/Users/hamzashahzad/Desktop/resume_projects/sparkground/src/evaluator/component.ts"],"sourcesContent":["import { elaborate, EvalStateGenerator, EvaluatorInterface } from \"./evaluate\";\nimport { Value, ComponentValue } from \"./value\";\n\nexport class SparkgroundComponent {\n  toDraw?: (state: Value) => EvalStateGenerator;\n  onTick?: (state: Value) => EvalStateGenerator;\n  onKey?: (state: Value, key: string) => EvalStateGenerator;\n\n  private constructor(\n    public state: Value,\n    public evaluator: EvaluatorInterface,\n  ) {\n    this.evaluator = evaluator;\n    evaluator.components.push(this);\n  }\n\n  static create(initialState: Value, evaluator: EvaluatorInterface): ComponentValue {\n    const component = new SparkgroundComponent(initialState, evaluator);\n    return { kind: \"component\", component };\n  }\n\n  draw() {\n    try {\n      if (this.toDraw) {\n        return elaborate(this.evaluator, this.toDraw(this.state));\n      }\n    } catch (error) {\n      // TODO: Remove this try/catch once eval() is changed to not throw any errors\n      console.error(error);\n    }\n  }\n\n  tick() {\n    try {\n      if (this.onTick) {\n        this.state = elaborate(this.evaluator, this.onTick(this.state));\n      }\n    } catch (error) {\n      // TODO: Remove this try/catch once eval() is changed to not throw any errors\n      console.error(error);\n    }\n  }\n\n  handleKeypress(key: string) {\n    try {\n      if (this.onKey) {\n        this.state = elaborate(this.evaluator, this.onKey(this.state, key));\n      }\n    } catch (error) {\n      // TODO: Remove this try/catch once eval() is changed to not throw any errors\n      console.error(error);\n    }\n  }\n}\n"],"mappings":"AAAA,OAASA,SAAS,KAAgD,YAAY,CAG9E,MAAO,MAAM,CAAAC,oBAAqB,CAKxBC,WAAWA,CACVC,KAAY,CACZC,SAA6B,CACpC,MAFOD,KAAY,CAAZA,KAAY,MACZC,SAA6B,CAA7BA,SAA6B,MANtCC,MAAM,aACNC,MAAM,aACNC,KAAK,QAMH,IAAI,CAACH,SAAS,CAAGA,SAAS,CAC1BA,SAAS,CAACI,UAAU,CAACC,IAAI,CAAC,IAAI,CAAC,CACjC,CAEA,MAAO,CAAAC,MAAMA,CAACC,YAAmB,CAAEP,SAA6B,CAAkB,CAChF,KAAM,CAAAQ,SAAS,CAAG,GAAI,CAAAX,oBAAoB,CAACU,YAAY,CAAEP,SAAS,CAAC,CACnE,MAAO,CAAES,IAAI,CAAE,WAAW,CAAED,SAAU,CAAC,CACzC,CAEAE,IAAIA,CAAA,CAAG,CACL,GAAI,CACF,GAAI,IAAI,CAACT,MAAM,CAAE,CACf,MAAO,CAAAL,SAAS,CAAC,IAAI,CAACI,SAAS,CAAE,IAAI,CAACC,MAAM,CAAC,IAAI,CAACF,KAAK,CAAC,CAAC,CAC3D,CACF,CAAE,MAAOY,KAAK,CAAE,CACd;AACAC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACtB,CACF,CAEAE,IAAIA,CAAA,CAAG,CACL,GAAI,CACF,GAAI,IAAI,CAACX,MAAM,CAAE,CACf,IAAI,CAACH,KAAK,CAAGH,SAAS,CAAC,IAAI,CAACI,SAAS,CAAE,IAAI,CAACE,MAAM,CAAC,IAAI,CAACH,KAAK,CAAC,CAAC,CACjE,CACF,CAAE,MAAOY,KAAK,CAAE,CACd;AACAC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACtB,CACF,CAEAG,cAAcA,CAACC,GAAW,CAAE,CAC1B,GAAI,CACF,GAAI,IAAI,CAACZ,KAAK,CAAE,CACd,IAAI,CAACJ,KAAK,CAAGH,SAAS,CAAC,IAAI,CAACI,SAAS,CAAE,IAAI,CAACG,KAAK,CAAC,IAAI,CAACJ,KAAK,CAAEgB,GAAG,CAAC,CAAC,CACrE,CACF,CAAE,MAAOJ,KAAK,CAAE,CACd;AACAC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACtB,CACF,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}