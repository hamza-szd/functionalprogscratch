{"ast":null,"code":"import Button from\"react-bootstrap/Button\";import Modal from\"react-bootstrap/Modal\";import{useEffect,useRef,useState}from\"react\";import{nodeAtIndexPath}from\"./trees/tree\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ValueEditorModal(_ref){let{indexPath,onClose}=_ref;const[newValueRepr,setNewValueRepr]=useState();const[newNode,setNewNode]=useState();const formRef=useRef(null);useEffect(()=>{if(indexPath){const node=nodeAtIndexPath(indexPath);setNewNode(node);switch(node.kind){case\"Number\":setNewValueRepr(`${node.value}`);break;case\"String\":setNewValueRepr(node.value);break;}}else{setNewNode(undefined);setNewValueRepr(undefined);}},[indexPath]);useEffect(()=>{if(indexPath){setTimeout(()=>{var _formRef$current,_formRef$current$quer;(_formRef$current=formRef.current)===null||_formRef$current===void 0?void 0:(_formRef$current$quer=_formRef$current.querySelector(\"input\"))===null||_formRef$current$quer===void 0?void 0:_formRef$current$quer.select();});}},[indexPath]);return/*#__PURE__*/_jsxs(Modal,{show:!!indexPath,onHide:()=>onClose(),centered:true,backdropClassName:\"modal-backdrop\",children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Edit Value\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsx(\"form\",{ref:formRef,onSubmit:event=>{event.preventDefault();event.stopPropagation();onClose(newNode);},children:(newNode===null||newNode===void 0?void 0:newNode.kind)===\"Number\"?/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"number\",step:\"any\",value:newValueRepr,onChange:event=>{setNewValueRepr(event.target.value);if(event.target.value.length){setNewNode({kind:\"Number\",value:Number(event.target.value)});}}}):(newNode===null||newNode===void 0?void 0:newNode.kind)===\"String\"?/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",value:newValueRepr,onChange:event=>{setNewValueRepr(event.target.value);setNewNode({kind:\"String\",value:event.target.value});}}):\"\"})}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>onClose(),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",onClick:()=>onClose(newNode),children:\"Update\"})]})]});}","map":{"version":3,"names":["Button","Modal","useEffect","useRef","useState","nodeAtIndexPath","jsx","_jsx","jsxs","_jsxs","ValueEditorModal","_ref","indexPath","onClose","newValueRepr","setNewValueRepr","newNode","setNewNode","formRef","node","kind","value","undefined","setTimeout","_formRef$current","_formRef$current$quer","current","querySelector","select","show","onHide","centered","backdropClassName","children","Header","closeButton","Title","Body","ref","onSubmit","event","preventDefault","stopPropagation","className","type","step","onChange","target","length","Number","Footer","variant","onClick"],"sources":["/Users/hamzashahzad/Desktop/resume_projects/sparkground/src/editor/ValueEditorModal.tsx"],"sourcesContent":["import Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { TreeIndexPath, nodeAtIndexPath } from \"./trees/tree\";\nimport { Expr } from \"../expr/expr\";\n\nexport type Props = {\n  indexPath?: TreeIndexPath;\n\n  onClose: (newNode?: Expr) => void;\n};\n\nexport default function ValueEditorModal({ indexPath, onClose }: Props) {\n  const [newValueRepr, setNewValueRepr] = useState<string>();\n  const [newNode, setNewNode] = useState<Expr>();\n\n  const formRef = useRef<HTMLFormElement>(null);\n\n  useEffect(() => {\n    if (indexPath) {\n      const node = nodeAtIndexPath(indexPath);\n      setNewNode(node);\n      switch (node.kind) {\n        case \"Number\":\n          setNewValueRepr(`${node.value}`);\n          break;\n        case \"String\":\n          setNewValueRepr(node.value);\n          break;\n      }\n    } else {\n      setNewNode(undefined);\n      setNewValueRepr(undefined);\n    }\n  }, [indexPath]);\n\n  useEffect(() => {\n    if (indexPath) {\n      setTimeout(() => {\n        formRef.current?.querySelector(\"input\")?.select();\n      });\n    }\n  }, [indexPath]);\n\n  return (\n    <Modal show={!!indexPath} onHide={() => onClose()} centered backdropClassName=\"modal-backdrop\">\n      <Modal.Header closeButton>\n        <Modal.Title>Edit Value</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <form\n          ref={formRef}\n          onSubmit={(event) => {\n            event.preventDefault();\n            event.stopPropagation();\n\n            onClose(newNode);\n          }}\n        >\n          {newNode?.kind === \"Number\" ? (\n            <input\n              className=\"form-control\"\n              type=\"number\"\n              step=\"any\"\n              value={newValueRepr}\n              onChange={(event) => {\n                setNewValueRepr(event.target.value);\n                if (event.target.value.length) {\n                  setNewNode({ kind: \"Number\", value: Number(event.target.value) });\n                }\n              }}\n            />\n          ) : newNode?.kind === \"String\" ? (\n            <input\n              className=\"form-control\"\n              type=\"text\"\n              value={newValueRepr}\n              onChange={(event) => {\n                setNewValueRepr(event.target.value);\n                setNewNode({ kind: \"String\", value: event.target.value });\n              }}\n            />\n          ) : (\n            \"\"\n          )}\n        </form>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={() => onClose()}>\n          Cancel\n        </Button>\n        <Button variant=\"primary\" onClick={() => onClose(newNode)}>\n          Update\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}